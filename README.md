# 红外遥控数码管显示与LED控制项目

## 项目简介

本项目基于 C51 单片机平台，通过红外遥控器接收用户指令，并将接收到的红外控制码实时显示在 **6 位共阴数码管（SMG）** 上。同时，根据不同的红外按键值，控制多个 **LED 指示灯** 和 **蜂鸣器** 的状态，实现简单的交互功能。

## 功能说明

- **红外信号接收**：使用红外接收模块（如 VS1838B）接收遥控器发出的 NEC 编码信号。
- **数码管显示**：
  - 将红外数据包中的控制字节（`gired_data[2]`）拆分为高4位和低4位；
  - 通过查表 `gsmg_code[]` 转换为对应的数码管段码；
  - 在数码管上显示该十六进制数值，并在最后一位固定显示字母 “H”（表示 Hex）。
- **LED 与蜂鸣器控制逻辑**：
  - 当红外控制码为 `0x39`（即数码管显示 `39H`）时，**蜂鸣器开启**；
  - 当控制码为 `0x5B`（显示 `5BH`）时，**LED2 点亮**；
  - 当控制码为 `0x06`（显示 `06H`）时，**LED1 点亮**；
  - 当控制码为 `0x07`（显示 `07H`）时，**LED7 点亮**；
  - 当控制码为 `0x7F`（显示 `7FH`）时，**LED8 点亮**；
  - 当控制码为 `0x7D`（显示 `7DH`）时，**LED8 以约1秒周期闪烁一次**（亮1秒，灭1秒）。

> 注：所有未匹配的红外码均会关闭对应外设（如 LED 或蜂鸣器），确保状态干净。

## 硬件依赖

- C51 单片机（如 STC89C52）
- 红外接收头（连接至 `ired.h` 定义的引脚）
- 6 位共阴数码管（SMG）
- LCD1602（虽已初始化，但当前代码中未使用）
- 多个 LED（至少 LED1、LED2、LED7、LED8）
- 蜂鸣器（有源或无源，由 `beep_on()` 控制）
- DS1302 实时时钟模块（已包含头文件但未在主逻辑中使用）

## 软件结构

- `smg.h` / `smg.c`：数码管驱动，包含段码表 `gsmg_code[]` 和显示函数 `smg_display()`
- `ired.h` / `ired.c`：红外解码模块，提供全局变量 `gired_data[3]` 存储接收到的数据
- `lcd1602.h`：LCD1602 初始化（当前未使用）
- `ds1302.h`：DS1302 驱动（当前未使用）
- `public.h`：通用定义（如 `u8` 类型、延时函数 `delay_10us()`、LED/蜂鸣器控制宏等）

## 使用方法

1. 将代码烧录至 C51 开发板；
2. 接通电源，系统自动初始化红外接收与数码管；
3. 使用支持 NEC 协议的红外遥控器对准接收头；
4. 按下不同按键，观察数码管显示及 LED/蜂鸣器响应。

## 注意事项

- 红外遥控器需发送标准 NEC 编码，且控制字节（通常为第三字节）需与代码中预设值匹配；
- `led2_off()` 在多个分支中重复调用，可能导致 LED2 无法稳定保持点亮状态（逻辑存在覆盖问题），建议优化控制逻辑；
- LCD1602 和 DS1302 虽被初始化但未实际使用，可根据需要扩展功能（如显示时间或菜单）；
- LED8 在 `0x7D` 模式下的闪烁使用了阻塞延时，期间系统无法响应其他红外信号，可考虑改用定时器实现非阻塞闪烁。

## 作者

嵌入式开发学习项目，并且对嵌入式开发有热血之心  
适用于 C51 单片机教学与实验
